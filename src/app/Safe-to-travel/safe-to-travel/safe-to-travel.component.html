<ion-header>
    <app-header [cname]="'Safe to Travel ?'"></app-header>
</ion-header>

<ion-content>
    <div class="benefits_content">
        <form [formGroup]="safeToTravelForm">
            <div class="card">
                <div class="card_header w-100">
                    <p>Country</p>
                    <ion-img src="assets/images/s1.png"></ion-img>
                </div>
                <div class="card_body safe-to-travel">
                    <ion-item>
                        <ion-label position="floating" style="margin-bottom: 16px;">Country to travel</ion-label>
                        <select id="myselection" class="form-control" formControlName="countryName"
                            (change)="changeCountry($event)">
                            <option [value]="country.name" *ngFor="let country of countries"> {{country.name}}
                            </option>
                        </select>
                    </ion-item>
                    <div *ngIf="submitted && f.countryName.errors" class="invalid-feedback">
                        <div *ngIf="f.countryName.errors.required">Country Name is required</div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card_header w-100">
                    <ion-img src="assets/images/s2.png"></ion-img>
                    <p>Passengers</p>
                </div>
                <div class="card_body">
                    <div class="general_details_body">
                        <div class="passengers-details">
                            <div class="plist">Infants</div>
                            <div class="icon-button">
                                <div class="icons">
                                    <i class="fa fa-minus" aria-hidden="true" (click)="decrement('infants')"></i>
                                    <span>
                                        <ion-input type="number" formControlName="infantsPassengers"
                                            [(ngModel)]="infantsPassengers" min='0'></ion-input>
                                    </span>
                                    <i class="fa fa-plus" aria-hidden="true" (click)="increment('infants')"></i>
                                </div>
                            </div>
                        </div>
                        <div class="passengers-details">
                            <div class="plist">Children</div>
                            <div class="icon-button">
                                <div class="icons">
                                    <i class="fa fa-minus" aria-hidden="true" (click)="decrement('children')"></i>
                                    <span>
                                        <ion-input type="number" formControlName="childrenPassengers"
                                            [(ngModel)]="childrenPassengers" min='0'></ion-input>
                                    </span>
                                    <i class="fa fa-plus" aria-hidden="true" (click)="increment('children')"></i>
                                </div>
                            </div>
                        </div>
                        <div class="passengers-details">
                            <div class="plist">Adults</div>
                            <div class="icon-button">
                                <div class="icons">
                                    <i class="fa fa-minus" aria-hidden="true" (click)="decrement('adults')"></i>
                                    <span>
                                        <ion-input type="number" formControlName="adultsPassengers"
                                            [(ngModel)]="adultsPassengers" min='0'></ion-input>
                                    </span>
                                    <i class="fa fa-plus" aria-hidden="true" (click)="increment('adults')"></i>
                                </div>
                            </div>
                        </div>
                        <div class="passengers-details">
                            <div class="plist">Senior Citizens</div>
                            <div class="icon-button">
                                <div class="icons">
                                    <i class="fa fa-minus" aria-hidden="true" (click)="decrement('senior')"></i>
                                    <span>
                                        <ion-input type="number" formControlName="seniorPassengers"
                                            [(ngModel)]="seniorPassengers" min='0'></ion-input>
                                    </span>
                                    <i class="fa fa-plus" aria-hidden="true" (click)="increment('senior')"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-3 text-center pl-4">
                            <img src="assets/images/infants.png" style="height: 35px;">
                            <p>{{infantsPassengers}}</p>
                        </div>
                        <div class="col-3 text-center">
                            <img src="assets/images/children.svg" style="height: 46px;margin-top:-4px;">
                            <p style="margin-top: -7px;">{{childrenPassengers}}</p>
                        </div>
                        <div class="col-3 text-center">
                            <img src="assets/images/adults.png" style="height: 33px;margin-top: 4px;">
                            <p>{{adultsPassengers}}</p>
                        </div>
                        <div class="col-3 text-center">
                            <img src="assets/images/seniorcityzens.png" style="height: 33px;
                            margin-top: 2px;">
                            <p>{{seniorPassengers}}</p>
                        </div>

                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card_header w-100">
                    <p>Dates</p>
                    <ion-img src="assets/images/s3.png"></ion-img>
                </div>
                <div class="card_body">
                    <div>
                        <ion-item>
                            <ion-label position="floating">From</ion-label>
                            <ion-datetime formControlName="fromDate" min="{{curruntDate}}" max="{{nextYear}}">
                            </ion-datetime>
                        </ion-item>
                        <div *ngIf="submitted && f.fromDate.errors" class="invalid-feedback">
                            <div *ngIf="f.fromDate.errors.required">From Date is required</div>
                        </div>
                    </div>
                    <div>
                        <ion-item>
                            <ion-label position="floating">To</ion-label>
                            <ion-datetime formControlName="toDate" max="{{nextYear}}"
                                min={{safeToTravelForm.value.fromDate}}></ion-datetime>
                        </ion-item>
                        <div *ngIf="submitted && f.toDate.errors" class="invalid-feedback">
                            <div *ngIf="f.toDate.errors.required">To Date is required</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="submit_btn">
                <button type="submit" (click)="addSafeToTravelReq(safeToTravelForm.value)" class="btn"
                    [disabled]="isDisable"><i class="fas fa-save"></i>Submit</button>
            </div>
        </form>
    </div>
    <div *ngIf="loading">
        <div id="loader-wrapper">
            <div class="heartbeatloader">
                <ion-img class="svgdraw" src="assets/images/loader.gif"></ion-img>
            </div>
        </div>
    </div>
</ion-content>